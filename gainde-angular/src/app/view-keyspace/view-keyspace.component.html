<div class="divConentKeyspace" *ngIf="homeKeyspaceVisible">
        <div class="row">            
            <div class="col-xs-6 col-md-6 col-lg-8"> 
                <h4>{{currentConnection.name}}</h4>    
            </div>
            <div class="col-xs-3 col-md-3 col-lg-2"> 
                <button type="button" class="btn btn-success" (click)="onClickAddKeyspace()" >Ajouter Keyspace</button>
            </div>
            <div class="col-xs-3 col-md-3 col-lg-2"> 
                <button type="button" class="btn btn-primary" (click)="onClickCloseConnection()" >Fermer Connection</button>
            </div>
        </div>
        <div class="row">    
            <div class="col-xs-5 col-md-6 col-lg-4">            
                <mat-tree [dataSource]="dataSource" [treeControl]="treeControl" class="police-tree">
                    <!-- This is the tree node template for leaf nodes -->
                    <mat-tree-node *matTreeNodeDef="let node" matTreeNodeToggle>
                    <li class="mat-tree-node">
                        <!-- use a disabled button to provide padding for tree leaf -->
                    <!--<button mat-icon-button disabled></button> --> 
                    
                        <div class="container-fluid">
                            <div class="row">
                                <div class="col-xs-8 col-md-8 col-lg-10">
                                    <mat-icon class="mat-icon-rtl-mirror" *ngIf="node.type==1">
                                        chevron_right
                                    </mat-icon>
                                    <span [ngClass]="{'divKeyspace':node.type==1,'divAction':node.type==2,'btn-primary':node.id==currentNodeId}"  
                                         (click)="onClickRowNode(node)">
                                             {{node.name}}
                                    </span>
                                </div>  
                                <div class="col-xs-4 col-md-4 col-lg-2">
                                    <mat-icon class="actionDeleteKeyspace" (click)="onClickRemoveKeyspaceOrTable(node)" >delete</mat-icon> 
                                </div>
                                                                           
                            </div>
                        </div>
                    </li>
                    </mat-tree-node>
                    <!-- This is the tree node template for expandable nodes -->
                    <mat-nested-tree-node *matTreeNodeDef="let node; when: hasChild">
                    <li>
                        <div class="mat-tree-node">
                        
                        <button mat-icon-button matTreeNodeToggle class="buttonTree"
                                [attr.aria-label]="'toggle ' + node.name" >
                            <mat-icon class="mat-icon-rtl-mirror">
                            {{treeControl.isExpanded(node) ? 'expand_more' : 'chevron_right'}}
                            </mat-icon>
                        </button>
                        <div class="container-fluid">
                            <div class="row">
                                <div class="col-xs-8 col-md-8 col-lg-10"><span [ngClass]="{'divKeyspace':node.type==1,'btn-primary':node.id==currentNodeId}"  
                                    (click)="onClickRowNode(node)">
                                    {{node.name}}
                                </span>
                             </div>  
                            <div class="col-xs-4 col-md-4 col-lg-2">
                                <mat-icon class="actionDeleteKeyspace" (click)="onClickRemoveKeyspaceOrTable(node)" >delete</mat-icon> 
                            </div>                                               
                            </div>
                        </div>
                    
                        </div>
                    
                        <ul [class.police-tree-invisible]="!treeControl.isExpanded(node)">
                        <ng-container matTreeNodeOutlet></ng-container>
                        </ul>
                    </li>
                    </mat-nested-tree-node>
                </mat-tree>
            </div>
            <div class="col-xs-7 col-md-6 col-lg-8"> 
                <div  *ngIf="createKeyspaceVisible && !tabsTableVisible">
                    <div *ngIf="!addKeyspaceVisible">
                        <mat-tab-group class="tabKeyspace" (click)="onClickShowKeyspace()" [(selectedIndex)]="selectedKeysPageIndex">
                            <mat-tab label="Infos"> 
                                <div class="row keyspaceRow">
                                    <label  class="col-sm-2 col-form-label">Nom</label>
                                    <div class="col-sm-10">
                                      <span>{{keyspaceInfo['name']}}</span>
                                    </div>
                                </div>
                                <div class="row keyspaceRow">
                                    <label  class="col-sm-2 col-form-label">Réplication Stratégy</label>
                                    <div class="col-sm-10">
                                      <span>{{keyspaceInfo['strategy']}}</span>
                                    </div>
                                </div>
                                <div class="row keyspaceRow">
                                    <label  class="col-sm-2 col-form-label">Réplication Factor</label>
                                    <div class="col-sm-10">
                                      <span>{{keyspaceInfo['replication']}}</span>
                                    </div>
                                </div>
                                <div class="row keyspaceRow">
                                    <label  class="col-sm-2 col-form-label">DURABLE_WRITES</label>
                                    <div class="col-sm-10">
                                      <span >{{keyspaceInfo['durableWrite']}}</span>
                                    </div>
                                </div>
                            </mat-tab>
                            <mat-tab  > 
                                <ng-template matTabLabel>
                                    <span [matBadge]="keyspaceInfo['tables'].length" matBadgeColor="warn">Tables</span>
                                </ng-template>
                                <mat-table  #table [dataSource]="keyspaceInfo.tables" >
                                    <ng-container matColumnDef="tableName">
                                      <mat-header-cell *matHeaderCellDef >
                                          Nom de la Table 
                                    </mat-header-cell>
                                      <mat-cell *matCellDef="let name" class="columTraffic"                                       
                                      class="actionClick"  (click)="onClickRowTable(currentConnection.name+'#'+keyspaceInfo['name']+'#'+name);">
                                        {{name}}
                                     </mat-cell>
                                    </ng-container> 
                                    <ng-container matColumnDef="tableAction">
                                        <mat-header-cell *matHeaderCellDef >
                                         <mat-icon class="actionAddTable" 
                                                     (click)="onClickAddNewTable(currentConnection.name+'#'+keyspaceInfo['name'])" >
                                                add
                                        </mat-icon> 
                                      </mat-header-cell>   
                                      <mat-cell *matCellDef="let name" class="columTraffic" >   
                                        <mat-icon class="actionAddTable" 
                                                 (click)="onClickEditTable(currentConnection.name+'#'+keyspaceInfo['name'])" >
                                            create
                                         </mat-icon>                                      
                                     </mat-cell>                                     
                                      </ng-container>                       
                                    <mat-header-row *matHeaderRowDef="displayedColumnsTableKeys"></mat-header-row>
                                     <mat-row  *matRowDef="let row; columns: displayedColumnsTableKeys;"></mat-row>         
                                  </mat-table>
                            </mat-tab>
                        </mat-tab-group> 
                    </div>
                    <div *ngIf="addKeyspaceVisible">
                        <form [formGroup]="keyspaceForm" (ngSubmit)="onClickSaveKeyspace()">
                            <div class="form-group">
                                <label for="name">Nom du Keyspace</label>
                                <input id="name" class="form-control" formControlName="name" >
                            </div>
                            <div class="form-group">
                                <label for="strategy">Replication Stratégie</label>
                                <select id="strategy" class="form-control" formControlName="strategy" >
                                <option value="SimpleStrategy">Simple Strategy</option>
                                <option value="NetworkTopologyStrategy">Network Topology Strategy</option>                     
                                </select>
                            </div>
                            <div class="form-group" *ngIf="keyspaceForm.value.strategy == 'NetworkTopologyStrategy'">
                                <label for="durableWrite">DURABLE_WRITES</label>
                                <input id="durableWrite" class="form-control" formControlName="durableWrite" type="checkbox" >
                            </div>
                            <div class="form-group">
                                <label for="replication">Replication factory</label>
                                <input id="replication" class="form-control" formControlName="replication" >
                            </div>                                           
                            <div class="row">
                                <div class="col-xs-4 col-md-4 col-lg-4">
                                    
                                </div>
                                <div class="col-xs-4 col-md-4 col-lg-4">
                                    <button type="submit" class="btn btn-success boutonSave" [disabled]="keyspaceForm.invalid" >
                                        Créer 
                                    </button> 
                                </div>
                                <div class="col-xs-4 col-md-4 col-lg-4">
                                    
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
                <div *ngIf="tabsTableVisible"> 
                    <div class="row" > <h4>{{tableInfo.name}}</h4> </div>
                    <mat-tab-group class="tabInfoConent" (click)="onClickShowTabColonne()" [(selectedIndex)]="selectedPageIndex">
                        <mat-tab label="Infos">
                            <div >
                                <mat-table  #table [dataSource]="tableInfo.primaryKey"   >
                                    <ng-container matColumnDef="key">
                                      <mat-header-cell *matHeaderCellDef >Clé Primaire </mat-header-cell>
                                      <mat-cell *matCellDef="let key" class="columTraffic" >
                                        {{key}}
                                     </mat-cell>
                                    </ng-container>                       
                                    <mat-header-row *matHeaderRowDef="displayedColumnsPrimary"></mat-header-row>
                                     <mat-row class="actionClick"   *matRowDef="let row; columns: displayedColumnsPrimary;"></mat-row>         
                                  </mat-table> 
                                  <mat-divider class="dividerTable"></mat-divider>
                                  <mat-table  #table [dataSource]="tableInfo.index"   >
                                    <ng-container matColumnDef="name">
                                      <mat-header-cell *matHeaderCellDef >Colonne </mat-header-cell>
                                      <mat-cell *matCellDef="let ptabIndex" class="columTraffic" >
                                       {{ptabIndex.columName}}
                                     </mat-cell>
                                    </ng-container>  
                                    <ng-container matColumnDef="indexName">
                                      <mat-header-cell *matHeaderCellDef >Index </mat-header-cell>
                                      <mat-cell *matCellDef="let ptabIndex" class="columTraffic" >
                                       {{ptabIndex.name}}
                                     </mat-cell>
                                    </ng-container> 								
                                    <mat-header-row *matHeaderRowDef="displayedColumnsIndex"></mat-header-row>
                                     <mat-row class="actionClick"   *matRowDef="let row; columns: displayedColumnsIndex;"></mat-row>         
                                  </mat-table> 
                            </div>
                        </mat-tab>
                        <mat-tab label="Données">
                            <div *ngIf="displayedColumnsTableData">
                                <mat-table  #table [dataSource]="tableDataDataSource"  >
                                    <ng-container  ngFor="let colName of displayedColumnsTableData | async" [matColumnDef]="colName">
                                    <mat-header-cell *matHeaderCellDef >
                                        {{colName}}
                                    </mat-header-cell>
                                    <mat-cell *matCellDef="let name" class="columTraffic"                                       
                                    class="actionClick"  >
                                        {{name}}
                                    </mat-cell>
                                    </ng-container>                                                        
                                    <mat-header-row *matHeaderRowDef="displayedColumnsTableData"></mat-header-row>
                                    <mat-row  *matRowDef="let row; columns: displayedColumnsTableData;"></mat-row>         
                                </mat-table>                               
                             </div>
                        </mat-tab>
                        <mat-tab >
                            <ng-template matTabLabel>
                                <span [matBadge]="columnsSize" class="spanBadge">Colonnes</span>
                            </ng-template>
                            <mat-table  #table [dataSource]="colonneDataSource"   >
                                <ng-container matColumnDef="name">
                                  <mat-header-cell *matHeaderCellDef >Nom Colonne </mat-header-cell>
                                  <mat-cell *matCellDef="let colonne" class="columTraffic" >
                                    {{colonne.name}}
                                 </mat-cell>
                                </ng-container> 
                                <ng-container matColumnDef="type">
                                    <mat-header-cell *matHeaderCellDef >Type </mat-header-cell>
                                    <mat-cell *matCellDef="let colonne" class="columTraffic" >
                                      {{colonne.type}}
                                   </mat-cell>
                                  </ng-container>    
                                  <ng-container matColumnDef="primaraKey">
                                    <mat-header-cell *matHeaderCellDef >Clé Primaire </mat-header-cell>
                                    <mat-cell *matCellDef="let colonne" class="columTraffic" >
                                        <mat-icon class="mat-icon-rtl-mirror iconKeyPrimary" *ngIf="colonne.primaraKey">
                                            vpn_key
                                            </mat-icon>                                      
                                      <span *ngIf="!colonne.primaraKey">Non</span>
                                   </mat-cell>
                                  </ng-container>  
                                  <ng-container matColumnDef="indexed">
                                    <mat-header-cell *matHeaderCellDef >Indexé </mat-header-cell>
                                    <mat-cell *matCellDef="let colonne" class="columTraffic" >
                                        <span *ngIf="colonne.indexed">Oui</span>
                                        <span *ngIf="!colonne.indexed">Non</span>
                                   </mat-cell>
                                  </ng-container>                   
                                 <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
                                 <mat-row class="actionClick"   *matRowDef="let row; columns: displayedColumns;"></mat-row>         
                              </mat-table> 
                        </mat-tab>
                        <mat-tab  > 
                            <ng-template matTabLabel>
                                <span [matBadge]="tableInfo['rows']" matBadgeColor="warn">nombre de lignes</span>
                            </ng-template>
                            <span >{{tableInfo['rows']}}</span>
                        </mat-tab>
                    </mat-tab-group>
                </div>
            </div>
        </div>
</div>
